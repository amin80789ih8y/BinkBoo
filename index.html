<!DOCTYPE html>
<html dir="rtl">
<head>
    <title>Ù…ÙØ­Ø§Ø¯Ø«Ø§Øª Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ©</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        *, *::before, *::after {
            -webkit-tap-highlight-color: transparent; /* Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªÙ…ÙŠÙŠØ² Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± */
            box-sizing: border-box;
        }

        body {
            font-family: 'Droid Arabic Kufi', serif;
            margin: 0;
            padding: 0;
            background-color: #f8f9fa;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .chat-container {
            width: 100%;
            height: 100vh;
            border-radius: 0;
            box-shadow: none;
            background-color: #fff;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .chat-header {
          padding: 20px;
          background-color: #673ab7;
          color: #fff;
          display: flex;
          align-items: center;
          justify-content: space-between;
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          z-index: 10;
          border-bottom-left-radius: 30px; /* Ø­Ø§ÙØ© Ù…Ø§Ø¦Ù„Ø© ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„ Ø¹Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø± */
          border-bottom-right-radius: 30px; /* Ø­Ø§ÙØ© Ù…Ø§Ø¦Ù„Ø© ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„ Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ† */
          box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2); /* Ø¸Ù„ Ø£Ù†ÙŠÙ‚ */
        }

        .chat-header i {
            font-size: 30px;
            margin-right: 15px;
        }

        .chat-header h1 {
            font-size: 24px;
            font-weight: bold;
            margin: 0;
        }

        .chat-messages {
            flex-grow: 1;
            overflow-y: scroll;
            padding: 20px;
            margin-top: 74px;
            margin-bottom: 80px;
            background-color: #f8f9fa;
        }

        .message {
            margin-bottom: 20px;
            padding: 15px 20px;
            border-radius: 25px;
            max-width: 75%;
            clear: both;
            position: relative;
            box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1);
        }

        .user-message {
            background-color: #e0f0e0;
            float: right;
            text-align: right;
        }

        .ai-message {
            background-color: #d8d8ff;
            float: left;
            text-align: left;
        }

        .ai-message .message-content {
            opacity: 0; /* Ø¥Ø®ÙØ§Ø¡ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
            animation: revealText 0.1s linear forwards; /* ØªØ·Ø¨ÙŠÙ‚ ØªØ£Ø«ÙŠØ± Ø§Ù„ÙƒØªØ§Ø¨Ø© */
        }

        @keyframes revealText {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .message img {
            max-width: 100%;
            display: block;
            border-radius: 10px;
            margin-top: 10px;
        }

        .chat-input {
            display: flex;
            padding: 15px;
            border-top: 1px solid #ddd;
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: #fff;
            z-index: 10;
        }

        .chat-input input[type="text"] {
            flex-grow: 1;
            padding: 12px 18px;
            border: none;
            border: 2px solid #673ab7;
            border-radius: 30px;
            margin-right: 10px;
            font-size: 16px;
            background-color: #f8f9fa;
            font-family: 'Droid Arabic Kufi', serif;
        }

        .chat-input button {
            padding: 12px 20px;
            background-color: #673ab7;
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 16px;
            box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.1);
            font-family: 'Droid Arabic Kufi', serif;
        }

        .chat-input #image-button {
            background-color: #f0f0f0;
            color: #333;
            margin-left: 0;
            margin-right: 10px;
        }

        .message {
            word-wrap: break-word;
            white-space: pre-wrap;
        }

        .message-options {
            display: flex;
            margin-top: 5px;
        }

        .message-options button {
            background: none;
            border: none;
            padding: 5px;
            margin-right: 8px;
            cursor: pointer;
            color: #673ab7;
        }

        .message-options button i {
            font-size: 20px;
        }

        .typing-indicator {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px 20px;
            border-radius: 25px;
            max-width: 75%;
            clear: both;
            background-color: #d8d8ff;
            float: left;
        }

        .typing-indicator span {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #673ab7;
            margin: 0 3px;
            animation: typing 1.5s infinite;
        }

        .typing-indicator.dark-mode span {
          background-color: #673ab7;
        }

        @keyframes typing {
            0% {
                transform: translateY(0);
                opacity: 0.2;
            }
            50% {
                transform: translateY(-3px);
                opacity: 1;
            }
            100% {
                transform: translateY(0);
                opacity: 0.2;
            }
        }

        .notifications-icon {
          position: relative;
          cursor: pointer;
          z-index: 20;
        }

        .notifications-icon .icon-container {
          background: linear-gradient(135deg, #ffc107, #ff5722);
          border-radius: 10px; /* Ø­ÙˆØ§Ù Ù…Ø§Ø¦Ù„Ø© */
          width: 45px;
          height: 45px;
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
          transition: all 0.3s ease;
        }

        .notifications-icon:hover .icon-container {
          transform: scale(1.1);
          box-shadow: 0px 6px 12px rgba(0, 0, 0, 0.3);
        }

        .notifications-icon .badge {
          position: absolute;
          top: 10px;
          right: 10px;
          background-color: #dc3545;
          color: #fff;
          border-radius: 50%;
          width: 10px;
          height: 10px;
          display: none; /* Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†Ù‚Ø·Ø© ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
        }

        .notifications-icon .badge.show {
            display: block; /* Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†Ù‚Ø·Ø© Ø¹Ù†Ø¯ ÙˆØ¬ÙˆØ¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© */
        }

        .notifications-icon i {
          font-size: 22px;
          color: #fff;
        }

        .notifications-popup {
          position: absolute;
          top: 60px;
          right: 20px;
          background-color: #fff;
          border-radius: 10px;
          box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
          min-width: 250px;
          max-width: 350px;
          max-height: 300px;
          overflow-y: auto;
          z-index: 20;
          display: none; /* Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
        }

        .notifications-popup.show {
          display: block;
        }

        .notifications-popup .notification-item {
          padding: 10px;
          border-bottom: 1px solid #eee;
          cursor: pointer;
          transition: background-color 0.3s ease;
        }

        .notifications-popup .notification-item:hover {
          background-color: #f8f9fa;
        }

        .notifications-popup .notification-item.unread {
          background-color: #f0f8ff; /* Ù„ÙˆÙ† Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± ØºÙŠØ± Ø§Ù„Ù…Ù‚Ø±ÙˆØ¡ */
        }

        .notifications-popup .notification-item .content {
          font-size: 14px;
          color: #333;
        }

        .notifications-popup .notification-item .timestamp {
          font-size: 12px;
          color: #999;
        }

        .chat-header .title-and-logo {
          display: flex;
          align-items: center;
          justify-content: center;
          flex-grow: 1;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Droid+Arabic+Kufi&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
</head>
<body>
    <div class="chat-container" id="chatContainer">
      <div class="chat-header" id="chatHeader">
        <div class="notifications-icon" title="Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª" onclick="toggleNotifications()">
          <div class="icon-container">
            <i class="fas fa-bell"></i>
            <span class="badge" id="notificationsBadge"></span>
          </div>
          <div class="notifications-popup" id="notificationsPopup">
            <div class="notification-item unread" id="notification1">
              <div class="content">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¬Ø§Ø±Ù</div>
              <div class="timestamp"></div>
            </div>
          </div>
        </div>
        <div class="title-and-logo">
          <i class="fas fa-brain"></i>
          <h1>Ù…ÙØ­Ø§Ø¯Ø«Ø§Øª Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ©</h1>
        </div>
      </div>
        <div class="chat-messages" id="chatMessages">
        </div>
        <div class="chat-input" id="chatInput">
            <input type="text" id="user-input" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§...">
            <input type="file" id="image-input" accept="image/*" style="display: none;">
            <button id="image-button" title="Ø¥Ø±Ø³Ø§Ù„ ØµÙˆØ±Ø©">ğŸ–¼ï¸</button>
            <button id="send-button" >Ø¥Ø±Ø³Ø§Ù„</button>
        </div>
    </div>

    <script>
        const chatMessages = document.getElementById('chatMessages');
        const userInput = document.getElementById('user-input');
        const sendButton = document.getElementById('send-button');
        const imageInput = document.getElementById('image-input');
        const imageButton = document.getElementById('image-button');
        const apiKey = "AIzaSyBGHFaGx0INLT4ZO1RVgbUvslizrTI5rzU";
        let lastUserMessage = '';

        function addMessage(content, sender, type = 'text') {
          const messageElement = document.createElement('div');
          messageElement.classList.add('message', `${sender}-message`);

          if (type === 'text') {
            if (sender === 'ai') {
              // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
              const messageContent = document.createElement('div');
              messageContent.classList.add('message-content');
              messageContent.textContent = content;
              messageElement.appendChild(messageContent);
            } else {
              // Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„ØªØ£Ø«ÙŠØ± Ø§Ù„ÙƒØªØ§Ø¨Ø© Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
              messageElement.textContent = content;
            }
          } else if (type === 'image') {
            const imgElement = document.createElement('img');
            imgElement.src = content;
            messageElement.appendChild(imgElement);
          }

          // Ø¥Ø¶Ø§ÙØ© Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø¹Ø¯ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
          if (sender === 'ai') {
            const optionsElement = document.createElement('div');
            optionsElement.classList.add('message-options');

            const copyButton = document.createElement('button');
            copyButton.innerHTML = '<i class="far fa-copy"></i>';
            copyButton.title = 'Ù†Ø³Ø®';
            copyButton.addEventListener('click', () => {
              navigator.clipboard.writeText(content);
            });

            const regenerateButton = document.createElement('button');
            regenerateButton.innerHTML = '<i class="fas fa-sync-alt"></i>';
            regenerateButton.title = 'Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ù†Ø´Ø§Ø¡';
            regenerateButton.addEventListener('click', () => {
              sendMessageToAI(lastUserMessage);
            });

            optionsElement.appendChild(copyButton);
            optionsElement.appendChild(regenerateButton);
            messageElement.appendChild(optionsElement);
          }

          chatMessages.appendChild(messageElement);
          chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function createPrompt(question) {
            const promptTemplate = `
            Ø¹Ù†Ø¯ Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŒ Ø±ÙƒÙ‘Ø² Ø¹Ù„Ù‰ ÙÙ‡Ù… Ù†ÙŠØ© Ø§Ù„Ø³Ø¤Ø§Ù„ Ø£ÙˆÙ„Ø§Ù‹. Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¨Ø³ÙŠØ·Ù‹Ø§ Ù…Ø«Ù„ 'Ù…Ø±Ø­Ø¨Ù‹Ø§'ØŒ ØªÙƒÙˆÙ† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ù…Ø®ØªØµØ±Ø© Ù…Ø«Ù„ 'Ù…Ø±Ø­Ø¨Ù‹Ø§ØŒ ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ'. Ø£Ù…Ø§ Ø¥Ø°Ø§ ØªØ·Ù„Ø¨ Ø§Ù„Ø³Ø¤Ø§Ù„ ØªÙØ§ØµÙŠÙ„ Ø£Ùˆ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©ØŒ Ù‚Ø¯Ù‘Ù… Ø¥Ø¬Ø§Ø¨Ø© Ø´Ø§Ù…Ù„Ø© ÙˆÙ…Ù†Ø¸Ù…Ø©ØŒ Ù„ÙƒÙ† Ø¯ÙˆÙ† Ø¥ÙØ±Ø§Ø· ÙÙŠ Ø§Ù„ØªÙØ§ØµÙŠÙ„ ØºÙŠØ± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©. Ù‚Ø³Ù‘Ù… Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ù„Ù‰ Ø£Ø¬Ø²Ø§Ø¡ ÙˆØ§Ø¶Ø­Ø© ÙˆØ³Ù‡Ù„Ø© Ø§Ù„ÙÙ‡Ù…ØŒ ÙˆØ§Ø³ØªØ®Ø¯Ù… Ø£Ø³Ù„ÙˆØ¨Ù‹Ø§ Ø§Ø­ØªØ±Ø§ÙÙŠÙ‹Ø§ ÙˆÙˆØ¯ÙŠÙ‹Ø§. ØªØ£ÙƒØ¯ Ø¯Ø§Ø¦Ù…Ù‹Ø§ Ù…Ù† Ø£Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ØªØ±ÙƒØ² Ø¹Ù„Ù‰ Ø§Ù„Ù†Ù‚Ø·Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©ØŒ ÙˆØ§Ø·Ù„Ø¨ ØªÙˆØ¶ÙŠØ­Ù‹Ø§ Ø¨Ù„Ø·Ù Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø³Ø¤Ø§Ù„ ØºØ§Ù…Ø¶Ù‹Ø§.

            Ø³Ø¤Ø§Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${question}

            Ø¥Ø¬Ø§Ø¨ØªÙƒ:
            `;
            return promptTemplate;
        }

        async function sendMessageToAI(message, imageBase64 = null) {
            const typingIndicator = document.createElement('div');
            typingIndicator.classList.add('typing-indicator');
            typingIndicator.innerHTML = '<span></span><span></span><span></span>';
            chatMessages.appendChild(typingIndicator);

            const prompt = createPrompt(message);

            const url = "https://generativelanguage.googleapis.com/v1/models/gemini-pro:generateContent?key=" + apiKey;
            const data = {
                contents: [{
                    parts: [{ text: prompt }]
                }]
            };

            if (imageBase64) {
                data.contents[0].parts.push({
                    inlineData: {
                        mimeType: "image/jpeg",
                        data: imageBase64
                    }
                });
            }

            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                chatMessages.removeChild(typingIndicator);

                if (result.candidates && result.candidates[0].content && result.candidates[0].content.parts[0].text) {
                    let aiResponse = result.candidates[0].content.parts[0].text;
                    aiResponse = aiResponse.replace(/^Ø¥Ø¬Ø§Ø¨ØªÙƒ:\s*/, '');
                    addMessage(aiResponse, 'ai');
                } else {
                    addMessage("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø±Ø¯. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.", 'ai');
                }
            } catch (error) {
                console.error('Error:', error);
                chatMessages.removeChild(typingIndicator);
                addMessage("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.", 'ai');
            }
        }

        function handleImageUpload() {
            const file = imageInput.files[0];
            if (file) {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => {
                    addMessage(reader.result, 'user', 'image');
                    sendMessageToAI("Ù…Ø§Ø°Ø§ ØªØ±Ù‰ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ØµÙˆØ±Ø©", reader.result.replace(/^data:image\/(png|jpeg|jpg);base64,/, ""));
                };
            }
        }

        imageButton.addEventListener('click', () => {
            imageInput.click();
        });

        imageInput.addEventListener('change', handleImageUpload);

        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø£Ùˆ Ø¥Ø®ÙØ§Ø¡ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
        function toggleNotifications() {
          const popup = document.getElementById('notificationsPopup');
          const badge = document.getElementById('notificationsBadge');

          // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†Ø§ÙØ°Ø©
          popup.classList.toggle('show');

          // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†Ù‚Ø·Ø© Ø¹Ù†Ø¯ Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
          if (popup.classList.contains('show')) {
            badge.classList.remove('show');
            markAllNotificationsAsRead();
          }
        }

        // Ø¯Ø§Ù„Ø© Ù„ÙˆØ¶Ø¹ Ø¹Ù„Ø§Ù…Ø© "Ù…Ù‚Ø±ÙˆØ¡" Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
        function markAllNotificationsAsRead() {
          const notifications = document.querySelectorAll('.notification-item.unread');
          notifications.forEach(notification => {
            notification.classList.remove('unread');
          });
        }

        // Ø¯Ø§Ù„Ø© Ù„ØªØ­Ø¯ÙŠØ« Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
        function updateNotificationContent(notificationId, newContent) {
          const notification = document.getElementById(notificationId);
          if (notification) {
            const contentElement = notification.querySelector('.content');
            contentElement.textContent = newContent;

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª
            const timestampElement = notification.querySelector('.timestamp');
            timestampElement.textContent = getFormattedTimestamp();
          }
        }

        // Ø¯Ø§Ù„Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¨ØªÙ†Ø³ÙŠÙ‚ Ù…Ù‚Ø±ÙˆØ¡
        function getFormattedTimestamp() {
          const now = new Date();
          return now.toLocaleString('ar-EG', {
            year: 'numeric',
            month: 'long',
            day: 'numeric',
            hour: 'numeric',
            minute: 'numeric',
          });
        }

        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ø´Ø¹Ø§Ø± Ø¬Ø¯ÙŠØ¯ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
        function addNotification(content) {
          const popup = document.getElementById('notificationsPopup');
          const item = document.createElement('div');
          item.classList.add('notification-item', 'unread');
          item.innerHTML = `
            <div class="content">${content}</div>
            <div class="timestamp">${getFormattedTimestamp()}</div>
          `;
          item.addEventListener('click', () => {
            item.classList.remove('unread');
            updateBadgeVisibility();
          });
          popup.appendChild(item);
          showBadge(); // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†Ù‚Ø·Ø© Ø¹Ù†Ø¯ Ø¥Ø¶Ø§ÙØ© Ø¥Ø´Ø¹Ø§Ø± Ø¬Ø¯ÙŠØ¯
        }

        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†Ù‚Ø·Ø©
        function showBadge() {
          const badge = document.getElementById('notificationsBadge');
          badge.classList.add('show');
        }

        // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
        document.addEventListener('click', (event) => {
          const popup = document.getElementById('notificationsPopup');
          const icon = document.querySelector('.notifications-icon');
          if (!popup.contains(event.target) && !icon.contains(event.target)) {
            popup.classList.remove('show');
          }
        });

        // ØªØ­Ø¯ÙŠØ« Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ø£ÙˆÙ„
        updateNotificationContent('notification1', 'ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¬Ø§Ø±Ù');

        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†Ù‚Ø·Ø© Ù…Ø¨Ø¯Ø¦ÙŠÙ‹Ø§ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
        showBadge();

        // Ù…Ø¹Ø§Ù„Ø¬ Ø­Ø¯Ø« Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
        sendButton.addEventListener('click', (event) => {
          event.preventDefault(); // Ù…Ù†Ø¹ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
          const message = userInput.value;
            if (message.trim() !== '') {
                addMessage(message, 'user');
                lastUserMessage = message; // ØªØ­Ø¯ÙŠØ« Ø¢Ø®Ø± Ø±Ø³Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                sendMessageToAI(message);
                userInput.value = '';
            }
        });

        // Ù…Ø¹Ø§Ù„Ø¬ Ø­Ø¯Ø« Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± "Enter" ÙÙŠ Ø­Ù‚Ù„ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù†Øµ
        userInput.addEventListener('keypress', (event) => {
          if (event.key === 'Enter') {
            event.preventDefault(); // Ù…Ù†Ø¹ Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ (Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬)
            const message = userInput.value;
            if (message.trim() !== '') {
                addMessage(message, 'user');
                lastUserMessage = message; // ØªØ­Ø¯ÙŠØ« Ø¢Ø®Ø± Ø±Ø³Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                sendMessageToAI(message);
                userInput.value = '';
            }
          }
        });
    </script>
</body>
</html>